{
  "meta": {
    "project": "SMB Lead Finder Platform",
    "date": "2025-09-13",
    "prepared_by": "Software Development Manager"
  },
  "product_overview": "SMB Lead Finder is an intelligent lead generation and management platform designed for sales and marketing teams to discover, qualify, and engage with small-to-medium business prospects using AI-powered natural language search and advanced filtering.",
  "core_goals": [
    "Enable sales and marketing teams to efficiently discover high-quality leads using natural language queries.",
    "Automatically score and prioritize leads based on multiple quality signals.",
    "Provide actionable insights and detailed intelligence for each lead to improve conversion rates.",
    "Streamline the entire lead management workflow from discovery to qualification and outreach.",
    "Support collaborative team features for shared search, notes, and lead assignment.",
    "Ensure high performance, scalability, and security compliance for enterprise use."
  ],
  "key_features": [
    "Natural Language Lead Search: Conversational querying with AI-powered parsing to structured DSL and ranked results.",
    "Lead Scoring & Qualification: Automated real-time scoring with customizable weights and industry-specific profiles.",
    "Lead Intelligence & Insights: Comprehensive data collection including website analysis, sentiment analysis, and outreach recommendations.",
    "Lead Management Workflow: Multi-state lead tracking with bulk updates, tagging, notes, and team collaboration.",
    "Multiple View Modes: Dashboard, table, and board (Kanban) views for flexible lead interaction.",
    "Advanced Filtering & Search: Multi-criteria filters, saved searches, search history, caching, and analytics.",
    "Export & Integration: Support for CSV, JSON, Excel exports, and integration with third-party tools.",
    "Collaboration Features: Shared filters, lead assignments, team comments, and permission-based access."
  ],
  "user_flow_summary": [
    "Lead Discovery Flow: Enter natural language query, view search progress, receive ranked results, filter and save searches.",
    "Lead Qualification Flow: Select leads, review detailed info and insights, apply tags and notes, update statuses, assign to team members.",
    "Export Flow: Apply dataset filters, select export format and fields, download the formatted lead data file."
  ],
  "validation_criteria": [
    "Search results returned within 2 seconds with accurate relevance ranking.",
    "Lead scores are consistent with defined scoring algorithms and update in real time.",
    "Website analysis fetches and stores accurate signals and artifacts for leads.",
    "UI reflects correct lead states and supports smooth transition through workflow stages.",
    "Exported files contain correct data formats and adhere to selected filters and fields.",
    "Role-based access control enforces permissions on data and actions appropriately.",
    "System performance meets concurrency, dataset, and latency requirements as specified.",
    "Security and privacy standards comply with GDPR, encryption, and audit policies."
  ],
  "code_summary": {
    "tech_stack": [
      "TypeScript",
      "React 18",
      "Vite",
      "TailwindCSS",
      "Supabase Edge Functions (Deno)",
      "Supabase Postgres",
      "Playwright",
      "ESLint"
    ],
    "features": [
      {
        "name": "Lead Search Orchestration",
        "description": "Parse prompt into DSL, run search job, poll results, manage cache and recent searches.",
        "files": [
          "src/hooks/useLeadSearch.ts",
          "src/hooks/useSearchState.ts",
          "supabase/functions/parse-prompt/index.ts",
          "supabase/functions/search-leads/index.ts",
          "supabase/functions/get-search-results/index.ts"
        ]
      },
      {
        "name": "Enriched-Only Search Mode",
        "description": "Optional mode to return only enriched, high-confidence leads (max 20). Includes new Supabase function and UI toggle.",
        "files": [
          "supabase/functions/search-enriched-leads/index.ts",
          "src/components/dashboard/SearchPanel.tsx",
          "src/pages/Index.tsx",
          "src/types/lead.ts",
          "supabase/migrations/20250912000000_add_enrichment_columns.sql"
        ]
      },
      {
        "name": "Website Analysis",
        "description": "Analyze website content for signals and insights; store artifacts.",
        "files": [
          "src/hooks/useWebsiteAnalysis.ts",
          "supabase/functions/analyze-website/index.ts",
          "supabase/functions/lib/simple-website-analyzer.ts"
        ]
      },
      {
        "name": "UI: Dashboard and Results",
        "description": "Dashboard, search panel, virtualized table, lead detail with evidence tab scaffold.",
        "files": [
          "src/pages/Index.tsx",
          "src/components/dashboard/SearchPanel.tsx",
          "src/components/dashboard/VirtualizedLeadsTable.tsx",
          "src/components/dashboard/LeadDetailPanel.tsx",
          "src/components/ui/job-status-indicator.tsx",
          "src/components/ui/sticky-header.tsx"
        ]
      },
      {
        "name": "Supabase Integration",
        "description": "Supabase client, auth hooks, and edge function communication.",
        "files": [
          "src/integrations/supabase/client.ts",
          "src/hooks/useAuth.ts"
        ]
      }
    ]
  }
}
